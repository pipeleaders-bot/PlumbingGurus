<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Estimate & Booking | Plumbing Gurus</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
/* ===== BASE ===== */
body {
  font-family: Arial, sans-serif;
  margin: 0;
  background: #f4f4f4;
  color: #333;
}

/* ===== HEADER ===== */
header {
  background: #fff;
  padding: 15px 30px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid #e0e0e0;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 25px;
}

.header-left img {
  height: 85px;
  object-fit: contain;
}

nav a {
  margin: 0 12px;
  text-decoration: none;
  font-weight: 600;
  color: #00539C;
}

nav a:hover { color: #FF6600; }

.header-phone {
  font-weight: bold;
  color: #FF6600;
}

.header-right img {
  height: 60px;
  object-fit: contain;
}

/* ===== MOBILE FIX ===== */
@media (max-width: 768px) {
  nav, .header-phone { display: none; }
  header { padding: 10px 15px; }
  .header-left img { height: 65px; }
  .header-right img { height: 45px; max-width: 130px; }
}

/* ===== HERO ===== */
.hero {
  background: linear-gradient(135deg,#e6f0fa,#fff);
  text-align: center;
  padding: 40px 20px;
}

.hero h1 {
  color: #00539C;
  font-size: 2.3em;
}

/* ===== SECTIONS ===== */
.section {
  max-width: 900px;
  background: #fff;
  margin: 40px auto;
  padding: 30px;
  border-radius: 12px;
}

input, select, textarea {
  width: 100%;
  padding: 12px;
  margin-top: 8px;
  border-radius: 8px;
  border: 1px solid #ccc;
}

button {
  margin-top: 15px;
  background: #FF6600;
  color: #fff;
  border: none;
  padding: 12px;
  border-radius: 8px;
  font-size: 1em;
  cursor: pointer;
}

button:hover { opacity: 0.9; }

/* ===== CHAT ===== */
#chatBox {
  margin-top: 15px;
  padding: 15px;
  background: #f9f9f9;
  border-radius: 10px;
  min-height: 180px;
}

.message {
  margin: 8px 0;
  padding: 10px 14px;
  border-radius: 10px;
  max-width: 80%;
}

.ai {
  background: #e6f0fa;
  color: #00539C;
}

.user {
  background: #FF6600;
  color: #fff;
  margin-left: auto;
}

/* ===== FOOTER ===== */
footer {
  text-align: center;
  padding: 20px;
  font-size: 0.9em;
}
</style>
</head>

<body>

<header>
  <div class="header-left">
    <img src="images/LOGO.png" alt="Plumbing Gurus Logo">
    <nav>
      <a href="index.html">Home</a>
      <a href="services.html">Services</a>
      <a href="estimate-booking.html">Estimate</a>
      <a href="contact.html">Contact</a>
    </nav>
    <span class="header-phone">(210) 906-8524</span>
  </div>

  <div class="header-right">
    <img src="Logo.png" alt="Alternate Logo">
  </div>
</header>

<div class="hero">
  <h1>Estimate & Book Plumbing Service</h1>
  <p>Get a realistic local estimate, then book service in minutes.</p>
</div>

<!-- ===== ESTIMATE SECTION ===== -->
<div class="section">
  <h2>Smart Estimate</h2>

  <input id="custName" placeholder="Your Name">
  <input id="custEmail" placeholder="Email">
  <input id="custPhone" placeholder="Phone">

  <button onclick="startEstimate()">Start Estimate</button>

  <div id="chatBox"></div>
  <div id="estimateResult"></div>
</div>

<!-- ===== BOOKING SECTION ===== -->
<div class="section">
  <h2>Book Service</h2>

  <form id="bookingForm">
    <label>Property Type</label>
    <select id="property">
      <option>House</option>
      <option>Apartment</option>
      <option>Commercial</option>
    </select>

    <label>Service Type</label>
    <select id="service">
      <option>Repair</option>
      <option>Replacement</option>
      <option>Renovation</option>
    </select>

    <label>Additional Notes</label>
    <textarea id="notes"></textarea>

    <button type="submit">Submit Booking</button>
  </form>
</div>

<footer>
  Â© 2025 Plumbing Gurus. Dispatch & referral services only.
</footer>

<script>
const chatBox = document.getElementById("chatBox");
const estimateResult = document.getElementById("estimateResult");

function startEstimate() {
  if (!custName.value || !custEmail.value || !custPhone.value) {
    alert("Please complete your info");
    return;
  }
  chatBox.innerHTML = "";
  addMsg(`Hi ${custName.value}! Describe your plumbing issue.`, "ai");
}

function addMsg(text, who) {
  const div = document.createElement("div");
  div.className = "message " + who;
  div.innerHTML = text;
  chatBox.appendChild(div);
}

document.addEventListener("keydown", e => {
  if (e.key === "Enter") {
    e.preventDefault();
    const text = e.target.value?.toLowerCase() || "";
    if (!text) return;

    addMsg(text, "user");

    let range = [100, 500];
    if (text.includes("leak")) range = [120, 450];
    if (text.includes("clog")) range = [100, 300];
    if (text.includes("toilet")) range = [100, 300];
    if (text.includes("faucet")) range = [80, 160];
    if (text.includes("heater")) range = [150, 600];

    estimateResult.innerHTML =
      `Estimated Range: $${range[0]} â€“ $${range[1]} (Labor only)<br>
      <em>Final pricing after inspection</em>`;
  }
});

document.getElementById("bookingForm").addEventListener("submit", e => {
  e.preventDefault();
  alert("Booking submitted! We will contact you shortly.");
});
</script>

</body>
</html>startChatBtn.addEventListener('click', () => {
  userData.name = document.getElementById('name').value.trim();
  userData.email = document.getElementById('email').value.trim();
  userData.phone = document.getElementById('phone').value.trim();
  if(!userData.name || !userData.email || !userData.phone){ alert("Please fill all fields."); return; }

  chatBox.innerHTML = '';
  userInput.disabled = false;
  addMessage(`Hi ${userData.name}! Please describe the plumbing problem below:`,'ai');
});

restartBtn.addEventListener('click', restartChat);

function addMessage(text,sender='ai'){
  const msg = document.createElement('div');
  msg.className = 'message ' + sender;
  msg.innerHTML = text;
  chatBox.appendChild(msg);
  chatBox.scrollTop = chatBox.scrollHeight;
}

userInput.addEventListener('keypress', function(e){
  if(e.key==='Enter') handleInput();
});

function handleInput(){
  const val = userInput.value.trim();
  if(!val) return;
  addMessage(val,'user');
  userInput.value='';

  // Detect emergency keywords
  const emergencyKeywords = ["emergency","urgent","now","asap","after hours","night","weekend"];
  let emergencyDetected = false;
  emergencyKeywords.forEach(k=>{
    if(val.toLowerCase().includes(k)) {
      userData.emergency=true;
      emergencyDetected = true;
    }
  });

  if(emergencyDetected){
    addMessage('âš  Emergency Service Detected â€” estimate increased by 25%','ai');
  }

  if(stage===0){
    userData.problem = val;
    const floorRegex = /(first floor|second floor|ground floor|basement)/i;
    const floorMatch = val.match(floorRegex);
    if(floorMatch) userData.floor = floorMatch[0];
    stage++;
    askFollowUp();
  }
}

function askFollowUp(){
  const text = userData.problem.toLowerCase();
  let options = [];
  if(text.includes("leak")) options = [{text:"ðŸ’§ Dripping Leak",value:"Dripping"}, {text:"ðŸš¿ Spraying Leak",value:"Spraying"}];
  else if(text.includes("clog")) options = [{text:"ðŸ½ï¸ Kitchen",value:"Kitchen"}, {text:"ðŸš° Bathroom",value:"Bathroom"}, {text:"ðŸš½ Toilet",value:"Toilet"}];
  else if(text.includes("faucet")) options = [{text:"ðŸ’§ Dripping Faucet",value:"Dripping"}, {text:"âŒ Not Working Faucet",value:"Not working"}];
  else if(text.includes("toilet")) options = [{text:"ðŸ’§ Running Toilet",value:"Running"}, {text:"ðŸš½ Not Flushing",value:"Not flushing"}];
  else if(text.includes("water heater")) options = [{text:"ðŸ”¥ Not Heating",value:"Not heating"}, {text:"ðŸ’§ Water Heater Leak",value:"Leaking"}];

  if(options.length){
    addMessage("Please select the option that best matches your issue:");
    options.forEach(opt=>{
      const b = document.createElement('button');
      b.className='option';
      b.innerHTML = opt.text;
      b.onclick = ()=>selectDetail(opt.value);
      chatBox.appendChild(b);
    });
  } else {
    if(!userData.floor) askFloor();
    else finalizeEstimate();
  }
}

function selectDetail(val){
  userData.detail = val;
  addMessage(val,'user');
  document.querySelectorAll('.option').forEach(b=>b.remove());
  if(!userData.floor) askFloor();
  else finalizeEstimate();
}

function askFloor(){
  addMessage("Which floor is the issue on?");
  const floors = [
    {text:"ðŸ  First Floor", value:"First Floor"},
    {text:"ðŸ¢ Second Floor", value:"Second Floor"},
    {text:"ðŸ¡ Ground/Basement", value:"Ground Floor"}
  ];
  floors.forEach(f=>{
    const btn = document.createElement('button');
    btn.className='option';
    btn.innerHTML=f.text;
    btn.onclick=()=>selectFloor(f.value);
    chatBox.appendChild(btn);
  });
}

function selectFloor(f){
  userData.floor=f;
  addMessage(f,'user');
  document.querySelectorAll('.option').forEach(b=>b.remove());
  finalizeEstimate();
  sendToEmail();
  restartBtn.style.display='inline-block';
}

function finalizeEstimate(){
  let baseRange=serviceCosts["Other"];
  const text=userData.problem.toLowerCase();
  if(text.includes("leak")) baseRange=serviceCosts["Leak"];
  else if(text.includes("clog")) baseRange=serviceCosts["Clog"];
  else if(text.includes("faucet")) baseRange=serviceCosts["Faucet"];
  else if(text.includes("toilet")) baseRange=serviceCosts["Toilet"];
  else if(text.includes("water heater")) baseRange=serviceCosts["Water Heater"];

  let multiplier=1.0;
  if(userData.floor.toLowerCase().includes("second")) multiplier*=1.15;
  else if(userData.floor.toLowerCase().includes("ground")) multiplier*=1.1;

  if(userData.emergency) multiplier*=1.25; // 25% markup for urgent/after-hours

  estimateResult.innerHTML=`Preliminary Local Estimate: $${Math.round(baseRange[0]*multiplier)} - $${Math.round(baseRange[1]*multiplier)} (Labor only)<br><em>Adjusted for San Antonio pricing and emergency status if applicable.</em>`;
}

function sendToEmail(){
  fetch("https://formsubmit.co/pipeleaders@gmail.com", {
    method:"POST",
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify(userData)
  });
}

function restartChat(){
  stage=0;
  userData={ name:'', email:'', phone:'', problem:'', detail:'', floor:'', emergency:false };
  chatBox.innerHTML='';
  userInput.value='';
  userInput.disabled=true;
  estimateResult.innerHTML='';
  restartBtn.style.display='none';
}
</script>
</body>
</html>      <option value="Easy">Easy</option>
      <option value="Difficult">Difficult</option>
    </select>

    <label>Additional Notes:</label>
    <textarea id="details"></textarea>

    <button type="submit">Get Preliminary Estimate</button>
  </form>

  <div id="estimateResult"></div>
</div>

<footer>
  <p>Â© 2025 Plumbing Gurus. Dispatch & referral services only.</p>
  <p><a href="terms.html" style="color:white; text-decoration:underline;">Terms & Conditions</a> | 
     <a href="privacy.html" style="color:white; text-decoration:underline;">Privacy Policy</a></p>
</footer>

<script>
const form = document.getElementById('estimateForm');
const estimateResult = document.getElementById('estimateResult');

form.addEventListener('submit', function(e){
  e.preventDefault();

  const service = document.getElementById('serviceType').value;
  const floor = document.getElementById('floor').value;
  const access = document.getElementById('access').value;

  let min=0, max=0;
  if(service==="Repair"){min=150; max=500;}
  else if(service==="Replacement"){min=200; max=1000;}
  else if(service==="Renovation"){min=500; max=2500;}
  else if(service==="New Build"){min=1000; max=7000;}

  let multiplier = 1;
  if(floor==="Second Floor") multiplier += 0.2;
  if(access==="Difficult") multiplier += 0.15;

  estimateResult.innerHTML = `Preliminary Estimate: $${Math.round(min*multiplier)} - $${Math.round(max*multiplier)} (Labor only). <br><em>Estimate only; final price may vary after inspection.</em>`;

  // Optional: send form data via FormSubmit
  const data = {
    name: document.getElementById('name').value,
    email: document.getElementById('email').value,
    phone: document.getElementById('phone').value,
    property: document.getElementById('property').value,
    service,
    problem: document.getElementById('problem').value,
    floor,
    access,
    details: document.getElementById('details').value
  };

  fetch("https://formsubmit.co/YOUR_EMAIL@gmail.com", {
    method: "POST",
    headers: {'Content-Type':'application/json'},
    body: JSON.stringify(data)
  }).then(()=>console.log("Client info sent!"))
    .catch(err=>console.error("Error sending client info:",err));
});
</script>

</body>
</html><!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Book Your Service | Plumbing Gurus</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
body { font-family: Arial, sans-serif; margin:0; background:#f4f4f4; color:#333; }
header { background:#ffffff; padding:15px 40px; display:flex; align-items:center; justify-content:space-between; border-bottom:1px solid #e0e0e0; }
.header-left, .header-right { display:flex; align-items:center; }
.header-left img, .header-right img { height:100px; max-width:360px; object-fit:contain; }
nav { margin-left:30px; }
nav a { color:#00539C; margin:0 18px; text-decoration:none; font-weight:600; font-size:1.05em; transition:color 0.3s ease; }
nav a:hover { color:#FF6600; }
.header-phone { color:#FF6600; font-weight:bold; font-size:1.2em; margin-left:30px; }
.header-phone span { color:#00539C; }

.hero { background: linear-gradient(135deg,#e6f0fa,#ffffff); padding:60px 20px 40px; text-align:center; border-bottom:1px solid #ccc; }
.hero h1 { color:#00539C; font-size:2.8em; line-height:1.2; margin-bottom:20px; }
.hero p { font-size:1.2em; max-width:700px; margin:0 auto 25px; line-height:1.5; }

.section { max-width:950px; margin:50px auto; padding:30px 25px; background:#ffffff; border-radius:12px; box-shadow:0 3px 18px rgba(0,0,0,0.08); }
.section h2 { color:#00539C; margin-bottom:25px; font-size:2em; }
form { display:flex; flex-direction:column; max-width:500px; margin:0 auto; }
label { margin-top:10px; font-weight:bold; }
input, select, textarea, button { padding:12px; margin-top:5px; border-radius:6px; border:1px solid #ccc; font-size:1em; }
select option.coming-soon { color:#999; font-style:italic; }
button { background:#FF6600; color:#fff; border:none; padding:14px; border-radius:6px; font-size:1.1em; cursor:pointer; transition:transform 0.3s ease; margin-top:15px; }
button:hover { transform:scale(1.03); }

#estimateResult { margin-top:20px; padding:15px; border:1px solid #999; background:#e6f7ff; border-radius:6px; font-weight:bold; }
@media(max-width:768px){ header{ flex-direction:column; text-align:center; } nav{ margin:20px 0; } .header-right{ display:flex; margin-top:15px; } }
</style>
</head>
<body>

<header>
  <div class="header-left">
    <img src="images/LOGO.png" alt="Plumbing Gurus Logo">
    <nav>
      <a href="index.html">Home</a>
      <a href="services.html">Services</a>
      <a href="estimate-booking.html">Estimate</a>
      <a href="contact.html">Contact</a>
      <a href="education.html">Education</a>
    </nav>
    <span class="header-phone">Call Now: <span>(210)</span> <span style="color:#FF6600;">906-8524</span></span>
  </div>
  <div class="header-right">
    <a href="estimate-booking.html"><img src="Logo.png" alt="Alternate Logo"></a>
  </div>
</header>

<div class="hero">
  <h1>Book Your Plumbing Service</h1>
  <p>San Antonio service available now â€” Austin coming soon. Choose your preferred time and get a preliminary estimate.</p>
</div>

<div class="section">
  <h2>Service Booking & Estimate</h2>
  <form id="estimateForm">
    <label>Name:</label>
    <input type="text" id="name" required>

    <label>Email:</label>
    <input type="email" id="email" required>

    <label>Phone:</label>
    <input type="text" id="phone" required>

    <label>Property Type:</label>
    <select id="property">
      <option value="House">House</option>
      <option value="Apartment">Apartment</option>
      <option value="Commercial">Commercial</option>
    </select>

    <label>Service Type:</label>
    <select id="serviceType">
      <option value="Repair">Repair</option>
      <option value="Replacement">Replacement</option>
      <option value="Renovation">Renovation</option>
      <option value="New Build">New Build</option>
    </select>

    <label>Problem / Fixture:</label>
    <select id="problem">
      <option value="Clogged Drain">Clogged Drain</option>
      <option value="Leaky Faucet">Leaky Faucet</option>
      <option value="Toilet Repair">Toilet Repair</option>
      <option value="Garbage Disposal">Garbage Disposal</option>
      <option value="Water Heater Diagnostics">Water Heater Diagnostics</option>
    </select>

    <label>Floor Level:</label>
    <select id="floor">
      <option value="Ground Floor">Ground Floor</option>
      <option value="Second Floor">Second Floor</option>
    </select>

    <label>Accessibility:</label>
    <select id="access">
      <option value="Easy">Easy</option>
      <option value="Difficult">Difficult</option>
    </select>

    <label>Additional Notes:</label>
    <textarea id="details"></textarea>

    <button type="submit">Get Preliminary Estimate</button>
  </form>

  <div id="estimateResult"></div>
</div>

<footer>
  <p>Â© 2025 Plumbing Gurus. Dispatch & referral services only.</p>
  <p><a href="terms.html" style="color:white; text-decoration:underline;">Terms & Conditions</a> | 
     <a href="privacy.html" style="color:white; text-decoration:underline;">Privacy Policy</a></p>
</footer>

<script>
const form = document.getElementById('estimateForm');
const estimateResult = document.getElementById('estimateResult');

form.addEventListener('submit', function(e){
  e.preventDefault();

  const service = document.getElementById('serviceType').value;
  const floor = document.getElementById('floor').value;
  const access = document.getElementById('access').value;

  let min=0, max=0;
  if(service==="Repair"){min=150; max=500;}
  else if(service==="Replacement"){min=200; max=1000;}
  else if(service==="Renovation"){min=500; max=2500;}
  else if(service==="New Build"){min=1000; max=7000;}

  let multiplier = 1;
  if(floor==="Second Floor") multiplier += 0.2;
  if(access==="Difficult") multiplier += 0.15;

  estimateResult.innerHTML = `Preliminary Estimate: $${Math.round(min*multiplier)} - $${Math.round(max*multiplier)} (Labor only). <br><em>Estimate only; final price may vary after inspection.</em>`;

  // Optional: send form data via FormSubmit
  const data = {
    name: document.getElementById('name').value,
    email: document.getElementById('email').value,
    phone: document.getElementById('phone').value,
    property: document.getElementById('property').value,
    service,
    problem: document.getElementById('problem').value,
    floor,
    access,
    details: document.getElementById('details').value
  };

  fetch("https://formsubmit.co/YOUR_EMAIL@gmail.com", {
    method: "POST",
    headers: {'Content-Type':'application/json'},
    body: JSON.stringify(data)
  }).then(()=>console.log("Client info sent!"))
    .catch(err=>console.error("Error sending client info:",err));
});
</script>

</body>
</html>    <p>Note: This is a preliminary estimate. Final pricing will depend on inspection and licensed plumber evaluation.</p>
  `;

  // Send data to your email via FormSubmit
  fetch("https://formsubmit.co/YOUR_EMAIL@gmail.com", {
    method: "POST",
    headers: { 'Content-Type':'application/json' },
    body: JSON.stringify(userData)
  }).then(() => console.log("Client info sent!"))
    .catch(err => console.error("Error sending client info:", err));
});
</script>

<footer>
<p>Â© 2025 Plumbing Gurus. Dispatch & referral services only.</p>
<p>
<a href="terms.html" style="color:white; text-decoration:underline;">Terms & Conditions</a> | 
<a href="privacy.html" style="color:white; text-decoration:underline;">Privacy Policy</a>
</p>
</footer>

</body>
</html><input type="text" name="floor" id="formFloor">
<input type="text" name="access" id="formAccess">
<input type="text" name="notes" id="formNotes">
<input type="hidden" name="_captcha" value="false">
<input type="hidden" name="_subject" value="New Booking Request">
<input type="hidden" name="_template" value="table">
</form>
<script>
function calculateEstimate(){
let service=document.getElementById("serviceType").value;
let floor=document.getElementById("floor").value;
let access=document.getElementById("access").value;
let min=0,max=0;
if(service==="Repair"){min=150; max=500;}
else if(service==="Remodel"){min=500; max=2500;}
else if(service==="New Build"){min=1000; max=7000;}
else if(service==="Replacement"){min=200; max=1000;}
let multiplier=1.0;
if(floor==="Second Floor") multiplier+=0.2;
if(access==="Difficult") multiplier+=0.15;
document.getElementById("estimateResult").innerHTML=`Preliminary Estimate: $${Math.round(min*multiplier)} - $${Math.round(max*multiplier)} (Labor only). <em>Estimate only, actual price may vary.</em>`;
}
["serviceType","floor","access"].forEach(id=>{document.getElementById(id).addEventListener("change",calculateEstimate);});document.getElementById("estimateForm").addEventListener("submit",function(e){ e.preventDefault(); ["name","email","phone","zip","serviceType","fixtures","floor","access","notes"].forEach(id=>{ document.getElementById("form"+id.charAt(0).toUpperCase()+id.slice(1)).value=document.getElementById(id).value; }); document.getElementById("hiddenForm").submit(); alert("Booking submitted! Our plumbers will contact you shortly."); }); </script>

<footer>
<p>Â© 2025 Plumbing Gurus. Dispatch & referral services only.</p>
<p><a href="terms.html">Terms & Conditions</a> | <a href="privacy.html">Privacy Policy</a></p>
</footer>
</body>
</html>
