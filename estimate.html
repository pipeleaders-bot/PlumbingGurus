<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Plumbing Gurus | Estimate</title>
<link rel="icon" href="images/LOGO.png" type="image/png">
<link rel="stylesheet" href="css/style.css">

<style>
/* Hero and form adjustments for estimate page */
.hero { text-align: center; padding: 60px 20px; background: linear-gradient(135deg,#eaf2fb,#ffffff); }
.hero h1 { color:#00539C; font-size:2.5em; margin-bottom:15px; }
.hero p { max-width:700px; margin:0 auto 25px; font-size:1.2em; }
form { max-width: 600px; margin: 0 auto; background:#fff; padding:25px; border-radius:12px; box-shadow:0 4px 18px rgba(0,0,0,0.08); }
form input, form select, form textarea { width: 100%; padding:12px; margin-bottom:15px; border-radius:8px; border:1px solid #ccc; font-size:1em; }
form button { width: 100%; padding:14px; background:#FF6600; color:#fff; font-weight:700; border:none; border-radius:8px; cursor:pointer; font-size:1.1em; transition:0.3s; }
form button:hover { background:#e65c00; }
#ai-response { margin-top:25px; padding:20px; background:#f1f5f9; border-radius:10px; min-height:80px; }
.disclaimer { font-size:0.85em; color:#555; margin-top:15px; text-align:center; }
</style>
</head>

<body>

<header>
  <div class="header-left">
    <img src="images/LOGO.png" alt="Plumbing Gurus Logo" class="logo">
    <nav>
      <a href="index.html">Home</a>
      <a href="services.html">Services</a>
      <a href="estimate.html">Estimate</a>
      <a href="booking.html">Book</a>
      <a href="education.html">Education</a>
    </nav>
    <span class="header-phone">Call Now: <span>(210)</span> <span style="color:#FF6600;">906-8524</span></span>
  </div>
</header>

<div class="hero">
  <h1>Get Your Plumbing Estimate</h1>
  <p>Fill out your info below and our smart estimator will provide an interactive, AI-powered preliminary estimate. We dispatch licensed plumbers and provide minor plumbing ourselves when legally permitted.</p>
</div>

<section>
  <form id="estimateForm" action="https://formsubmit.co/9f7e5896f9be69b62056c861f68e17e3" method="POST">
    <input type="text" name="name" placeholder="Full Name" required>
    <input type="tel" name="phone" placeholder="Phone Number" required>
    <input type="email" name="email" placeholder="Email Address" required>
    <input type="text" name="address" placeholder="Service Address" required>

    <select name="service" id="serviceSelect" required>
      <option value="">Select Service Needed</option>
      <option value="Leak Repair">Leak Repair</option>
      <option value="Toilet Service">Toilet Service</option>
      <option value="Clog Removal">Clog Removal</option>
      <option value="Water Heater">Water Heater</option>
      <option value="Faucet & Fixture">Faucet & Fixture</option>
      <option value="Shower & Bath">Shower & Bath</option>
    </select>

    <textarea name="details" placeholder="Describe your issue or request in detail..." rows="4" required></textarea>

    <!-- FormSubmit hidden fields -->
    <input type="hidden" name="_captcha" value="false">
    <input type="hidden" name="_subject" value="New Plumbing Estimate Request">
    <input type="hidden" name="_next" value="https://www.plumbinggurus.us/thank-you.html">

    <button type="submit">Submit & Get Estimate</button>
  </form>

  <div id="ai-response">
    <p><em>Your AI-generated preliminary estimate will appear here after submission.</em></p>
  </div>

  <div class="disclaimer">
    <p>Note: This is a preliminary estimate only. Plumbing Gurus coordinates licensed plumbers and performs minor plumbing where legally permitted. Final pricing may vary after on-site evaluation.</p>
  </div>
</section>

<script>
// --- AI Estimator Simulation ---
// If you want real GPT-5 integration, replace the fetch below with OpenAI API calls
document.getElementById('estimateForm').addEventListener('submit', function(e) {
  e.preventDefault();

  // Collect customer info
  const formData = new FormData(this);
  const name = formData.get('name');
  const service = formData.get('service');
  const details = formData.get('details');

  // Simulate AI estimate
  const severityKeywords = ['major', 'urgent', 'leak', 'burst', 'overflow'];
  let severity = 1;
  severityKeywords.forEach(word => {
    if(details.toLowerCase().includes(word)) severity += 1;
  });

  let baseCost = 100;
  switch(service) {
    case 'Leak Repair': baseCost=120; break;
    case 'Toilet Service': baseCost=90; break;
    case 'Clog Removal': baseCost=110; break;
    case 'Water Heater': baseCost=250; break;
    case 'Faucet & Fixture': baseCost=80; break;
    case 'Shower & Bath': baseCost=180; break;
  }

  const estimate = baseCost * severity;
  document.getElementById('ai-response').innerHTML = `<h3>Preliminary AI Estimate</h3><p>Dear <strong>${name}</strong>, based on your request for <strong>${service}</strong> and issue details, the estimated cost is approximately <strong>$${estimate}</strong>. Final pricing will be confirmed after on-site evaluation.</p>`;
  
  // Submit form to FormSubmit
  this.submit();
});
</script>

</body>
</html>    <!-- Step 4: Additional Details -->
    <div class="step" data-step="4">
      <h3>Provide additional details (optional)</h3>
      <textarea name="details" placeholder="Any details to help us estimate"></textarea>
      <button type="button" class="prev">Back</button>
      <button type="button" class="next">Next</button>
    </div>

    <!-- Step 5: Review & AI-style estimate -->
    <div class="step" data-step="5">
      <h3>Preliminary Estimate</h3>
      <div class="summary" id="summary"></div>
      <div class="disclaimer">
        <strong>Disclaimer:</strong> Plumbing Gurus coordinates licensed plumbing services. Any minor plumbing performed by us is within legal limits. This estimate is preliminary and may vary based on actual property conditions and professional assessment.
      </div>
      <button type="button" class="prev">Back</button>
      <button type="submit" class="submit">Submit Estimate Request</button>
    </div>

  </form>
</section>

<script>
// Step navigation
const form = document.getElementById('estimateForm');
const steps = form.querySelectorAll('.step');
let currentStep = 0;

function showStep(index) {
  steps.forEach((s, i) => s.classList.toggle('active', i === index));
  currentStep = index;

  if (steps[index].dataset.step == "5") {
    const summary = document.getElementById('summary');
    const service = form.querySelector('select[name="service"]').value;
    const severity = form.querySelector('select[name="severity"]').value;
    const difficulty = form.querySelector('select[name="location_difficulty"]').value;
    const details = form.querySelector('textarea[name="details"]').value;

    // Base pricing ranges by service
    let base;
    switch(service){
      case "Leak Repair": base=[150,850]; break;
      case "Toilet Service": base=[100,500]; break;
      case "Clog Removal": base=[150,600]; break;
      case "Water Heater": base=[150,900]; break;
      case "Faucet & Fixture": base=[100,400]; break;
      case "Shower & Bath": base=[150,900]; break;
      default: base=[100,500];
    }

    // Adjust by severity
    let multiplier=1;
    if(severity=="Minor") multiplier=1;
    else if(severity=="Moderate") multiplier=1.25;
    else if(severity=="Major") multiplier=1.5;

    // Adjust by location difficulty
    if(difficulty=="Easy") multiplier *=1;
    else if(difficulty=="Medium") multiplier *=1.2;
    else if(difficulty=="Hard") multiplier *=1.4;

    let min=Math.round(base[0]*multiplier);
    let max=Math.round(base[1]*multiplier);

    summary.innerHTML=`<p><strong>Service:</strong> ${service}</p>
                       <p><strong>Severity:</strong> ${severity}</p>
                       <p><strong>Location Difficulty:</strong> ${difficulty}</p>
                       <p><strong>Additional Details:</strong> ${details}</p>
                       <p><strong>Estimated Cost Range:</strong> $${min} - $${max}</p>`;
  }
}

// Next / Prev buttons
form.querySelectorAll('.next').forEach(btn => btn.addEventListener('click', ()=>{
  const inputs = steps[currentStep].querySelectorAll('input, select, textarea');
  let valid=true;
  inputs.forEach(input=>{ if(!input.checkValidity()) valid=false; });
  if(valid) showStep(currentStep+1);
  else inputs[0].reportValidity();
}));

form.querySelectorAll('.prev').forEach(btn => btn.addEventListener('click', ()=>showStep(currentStep-1)));
</script>

</body>
</html>
