<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Plumbing Gurus | Estimate</title>
<link rel="stylesheet" href="css/style.css">
<style>
/* Additional styles for Estimate page */
.estimate-section { max-width: 700px; margin: 50px auto; padding: 30px; background: #fff; border-radius: 12px; box-shadow: 0 3px 18px rgba(0,0,0,0.08); }
.estimate-section h2 { color: #00539C; margin-bottom: 25px; text-align: center; }
.estimate-form { display: grid; gap: 16px; }
.estimate-form input, .estimate-form select, .estimate-form textarea { padding: 12px; border-radius: 8px; border: 1px solid #ccc; font-size: 1rem; }
.estimate-result { margin-top: 20px; padding: 20px; background: #f1f5f9; border-radius: 12px; display: none; font-weight: bold; color: #00539C; }
button.estimate-btn { background: #FF6600; color: #fff; border: none; padding: 14px; border-radius: 8px; font-size: 1.1rem; cursor: pointer; transition: 0.3s; }
button.estimate-btn:hover { background: #e65c00; transform: scale(1.03); }
.disclaimer { font-size: 0.9rem; color: #555; margin-top: 20px; line-height: 1.5; }
</style>
</head>
<body>

<header>
  <img src="images/LOGO.png" alt="Plumbing Gurus Logo" class="logo">
  <nav>
    <a href="index.html">Home</a>
    <a href="services.html">Services</a>
    <a href="estimate.html">Estimate</a>
    <a href="booking.html">Book</a>
    <a href="education.html">Education</a>
  </nav>
</header>

<section class="estimate-section">
  <h2>Get Your Plumbing Estimate</h2>
  <p>Fill out your info and answer a few questions. An estimated price will appear instantly.</p>

  <form class="estimate-form" id="estimateForm">
    <input type="text" name="name" placeholder="Your Name" required>
    <input type="tel" name="phone" placeholder="Phone Number" required>
    <input type="email" name="email" placeholder="Email Address" required>

    <select name="service" id="service" required>
      <option value="" disabled selected>Select Service</option>
      <option value="Leak Repair">Leak Repair</option>
      <option value="Toilet Service">Toilet Service</option>
      <option value="Clog Removal">Clog Removal</option>
      <option value="Water Heater">Water Heater</option>
      <option value="Faucet & Fixture">Faucet & Fixture</option>
      <option value="Shower & Bath">Shower & Bath</option>
    </select>

    <select name="urgency" id="urgency" required>
      <option value="" disabled selected>How urgent is it?</option>
      <option value="Immediate">Immediate (Same day)</option>
      <option value="1-3 days">1-3 days</option>
      <option value="Flexible">Flexible schedule</option>
    </select>

    <textarea name="details" placeholder="Describe your problem (optional)"></textarea>

    <button type="submit" class="estimate-btn">Get Estimate</button>
  </form>

  <div class="estimate-result" id="estimateResult"></div>

  <p class="disclaimer">
    *Disclaimer: Plumbing Gurus provides <strong>dispatch and referral services</strong> for licensed plumbing professionals. Any minor plumbing work performed directly by our team is limited to tasks <strong>not requiring a license</strong> under state and local law.  
    The estimates provided here are <strong>preliminary ranges only</strong> and may vary based on the actual job requirements, property conditions, and urgency. Customers are responsible for confirming pricing and licensing status before work begins.
  </p>
</section>

<script>
const form = document.getElementById('estimateForm');
const result = document.getElementById('estimateResult');

form.addEventListener('submit', function(e){
  e.preventDefault();

  const service = document.getElementById('service').value;
  const urgency = document.getElementById('urgency').value;

  const prices = {
    "Leak Repair": { "Immediate": "$120 - $200", "1-3 days": "$100 - $180", "Flexible": "$90 - $160" },
    "Toilet Service": { "Immediate": "$110 - $180", "1-3 days": "$90 - $150", "Flexible": "$80 - $140" },
    "Clog Removal": { "Immediate": "$100 - $170", "1-3 days": "$80 - $150", "Flexible": "$70 - $130" },
    "Water Heater": { "Immediate": "$350 - $650", "1-3 days": "$320 - $600", "Flexible": "$300 - $550" },
    "Faucet & Fixture": { "Immediate": "$90 - $160", "1-3 days": "$80 - $140", "Flexible": "$70 - $120" },
    "Shower & Bath": { "Immediate": "$200 - $400", "1-3 days": "$180 - $350", "Flexible": "$160 - $300" }
  };

  const estimateText = prices[service][urgency];
  result.style.display = 'block';
  result.innerHTML = `<strong>Estimated Cost for ${service} (${urgency}):</strong> ${estimateText}`;
});
</script>

</body>
</html>
  // Submit form to FormSubmit in parallel
  form.submit();
});
</script>

</body>
</html>    case 'Water Heater': baseCost=250; break;
    case 'Faucet & Fixture': baseCost=80; break;
    case 'Shower & Bath': baseCost=180; break;
  }

  const estimate = baseCost * severity;
  document.getElementById('ai-response').innerHTML = `<h3>Preliminary AI Estimate</h3><p>Dear <strong>${name}</strong>, based on your request for <strong>${service}</strong> and issue details, the estimated cost is approximately <strong>$${estimate}</strong>. Final pricing will be confirmed after on-site evaluation.</p>`;
  
  // Submit form to FormSubmit
  this.submit();
});
</script>

</body>
</html>    <!-- Step 4: Additional Details -->
    <div class="step" data-step="4">
      <h3>Provide additional details (optional)</h3>
      <textarea name="details" placeholder="Any details to help us estimate"></textarea>
      <button type="button" class="prev">Back</button>
      <button type="button" class="next">Next</button>
    </div>

    <!-- Step 5: Review & AI-style estimate -->
    <div class="step" data-step="5">
      <h3>Preliminary Estimate</h3>
      <div class="summary" id="summary"></div>
      <div class="disclaimer">
        <strong>Disclaimer:</strong> Plumbing Gurus coordinates licensed plumbing services. Any minor plumbing performed by us is within legal limits. This estimate is preliminary and may vary based on actual property conditions and professional assessment.
      </div>
      <button type="button" class="prev">Back</button>
      <button type="submit" class="submit">Submit Estimate Request</button>
    </div>

  </form>
</section>

<script>
// Step navigation
const form = document.getElementById('estimateForm');
const steps = form.querySelectorAll('.step');
let currentStep = 0;

function showStep(index) {
  steps.forEach((s, i) => s.classList.toggle('active', i === index));
  currentStep = index;

  if (steps[index].dataset.step == "5") {
    const summary = document.getElementById('summary');
    const service = form.querySelector('select[name="service"]').value;
    const severity = form.querySelector('select[name="severity"]').value;
    const difficulty = form.querySelector('select[name="location_difficulty"]').value;
    const details = form.querySelector('textarea[name="details"]').value;

    // Base pricing ranges by service
    let base;
    switch(service){
      case "Leak Repair": base=[150,850]; break;
      case "Toilet Service": base=[100,500]; break;
      case "Clog Removal": base=[150,600]; break;
      case "Water Heater": base=[150,900]; break;
      case "Faucet & Fixture": base=[100,400]; break;
      case "Shower & Bath": base=[150,900]; break;
      default: base=[100,500];
    }

    // Adjust by severity
    let multiplier=1;
    if(severity=="Minor") multiplier=1;
    else if(severity=="Moderate") multiplier=1.25;
    else if(severity=="Major") multiplier=1.5;

    // Adjust by location difficulty
    if(difficulty=="Easy") multiplier *=1;
    else if(difficulty=="Medium") multiplier *=1.2;
    else if(difficulty=="Hard") multiplier *=1.4;

    let min=Math.round(base[0]*multiplier);
    let max=Math.round(base[1]*multiplier);

    summary.innerHTML=`<p><strong>Service:</strong> ${service}</p>
                       <p><strong>Severity:</strong> ${severity}</p>
                       <p><strong>Location Difficulty:</strong> ${difficulty}</p>
                       <p><strong>Additional Details:</strong> ${details}</p>
                       <p><strong>Estimated Cost Range:</strong> $${min} - $${max}</p>`;
  }
}

// Next / Prev buttons
form.querySelectorAll('.next').forEach(btn => btn.addEventListener('click', ()=>{
  const inputs = steps[currentStep].querySelectorAll('input, select, textarea');
  let valid=true;
  inputs.forEach(input=>{ if(!input.checkValidity()) valid=false; });
  if(valid) showStep(currentStep+1);
  else inputs[0].reportValidity();
}));

form.querySelectorAll('.prev').forEach(btn => btn.addEventListener('click', ()=>showStep(currentStep-1)));
</script>

</body>
</html>
