<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Plumbing Gurus | Estimate</title>
<link rel="stylesheet" href="css/style.css">
<link rel="icon" href="images/LOGO.png" type="image/png">
</head>
<body>

<header>
  <img src="images/LOGO.png" alt="Plumbing Gurus Logo" class="logo">
  <nav>
    <a href="index.html">Home</a>
    <a href="services.html">Services</a>
    <a href="estimate.html">Get Estimate</a>
    <a href="booking.html">Book</a>
    <a href="education.html">Education</a>
  </nav>
  <div class="call">(210) 906-8524</div>
</header>

<section class="hero">
  <h1>Get a Preliminary Plumbing Estimate</h1>
  <p>Provide your info below, and our AI-assisted estimator will give you a preliminary cost. All licensed work is performed by certified plumbers.</p>
</section>

<section class="section">
  <h2>Estimate Form</h2>
  <form id="estimate-form" action="https://formsubmit.co/9f7e5896f9be69b62056c861f68e17e3" method="POST">
    <input type="text" name="name" placeholder="Your Name" required>
    <input type="email" name="email" placeholder="Email Address" required>
    <input type="tel" name="phone" placeholder="Phone Number" required>

    <label for="service">Service Needed:</label>
    <select name="service" id="service" required>
      <option value="" disabled selected>Select a service</option>
      <option value="Leak Repair">Leak Repair</option>
      <option value="Toilet Service">Toilet Service</option>
      <option value="Clog Removal">Clog Removal</option>
      <option value="Water Heater">Water Heater</option>
      <option value="Faucet & Fixture">Faucet & Fixture</option>
      <option value="Shower & Bath">Shower & Bath</option>
    </select>

    <label for="severity">Issue Severity (1-5):</label>
    <input type="number" name="severity" id="severity" min="1" max="5" required>

    <button type="submit" class="primary">Get Estimate</button>
  </form>

  <div id="ai-response" style="margin-top:25px; font-weight:bold;"></div>

  <p class="disclaimer" style="margin-top:30px;">
    Customers are responsible for confirming pricing and licensing status before work begins. All licensed plumbing services are performed by certified professionals. Estimates provided are preliminary and may vary after on-site evaluation.
  </p>
</section>

<footer>
  <p>Â© 2025 Plumbing Gurus. Dispatch & referral services only.</p>
  <p><a href="terms.html">Terms & Conditions</a> | <a href="privacy.html">Privacy Policy</a></p>
</footer>

<script>
document.getElementById('estimate-form').addEventListener('submit', function(e) {
  e.preventDefault(); // Prevent default form submission so we can show estimate first

  const name = this.name.value;
  const service = this.service.value;
  const severity = parseInt(this.severity.value) || 1;

  let baseCost = 0;
  switch(service) {
    case 'Leak Repair': baseCost = 150; break;
    case 'Toilet Service': baseCost = 90; break;
    case 'Clog Removal': baseCost = 120; break;
    case 'Water Heater': baseCost = 250; break;
    case 'Faucet & Fixture': baseCost = 80; break;
    case 'Shower & Bath': baseCost = 180; break;
    default: baseCost = 100; break;
  }

  const estimate = baseCost * severity;

  // Display AI-assisted preliminary estimate
  document.getElementById('ai-response').innerHTML = `
    Preliminary AI Estimate:<br>
    Dear ${name}, based on your request for ${service} with issue severity level ${severity}, 
    the estimated cost is approximately <strong>$${estimate}</strong>. 
    Final pricing will be confirmed after on-site evaluation by a licensed plumber.
  `;

  // Submit form to FormSubmit
  this.submit();
});
</script>

</body>
</html></html>    case 'Water Heater': baseCost=250; break;
    case 'Faucet & Fixture': baseCost=80; break;
    case 'Shower & Bath': baseCost=180; break;
  }

  const estimate = baseCost * severity;
  document.getElementById('ai-response').innerHTML = `<h3>Preliminary AI Estimate</h3><p>Dear <strong>${name}</strong>, based on your request for <strong>${service}</strong> and issue details, the estimated cost is approximately <strong>$${estimate}</strong>. Final pricing will be confirmed after on-site evaluation.</p>`;
  
  // Submit form to FormSubmit
  this.submit();
});
</script>

</body>
</html>    <!-- Step 4: Additional Details -->
    <div class="step" data-step="4">
      <h3>Provide additional details (optional)</h3>
      <textarea name="details" placeholder="Any details to help us estimate"></textarea>
      <button type="button" class="prev">Back</button>
      <button type="button" class="next">Next</button>
    </div>

    <!-- Step 5: Review & AI-style estimate -->
    <div class="step" data-step="5">
      <h3>Preliminary Estimate</h3>
      <div class="summary" id="summary"></div>
      <div class="disclaimer">
        <strong>Disclaimer:</strong> Plumbing Gurus coordinates licensed plumbing services. Any minor plumbing performed by us is within legal limits. This estimate is preliminary and may vary based on actual property conditions and professional assessment.
      </div>
      <button type="button" class="prev">Back</button>
      <button type="submit" class="submit">Submit Estimate Request</button>
    </div>

  </form>
</section>

<script>
// Step navigation
const form = document.getElementById('estimateForm');
const steps = form.querySelectorAll('.step');
let currentStep = 0;

function showStep(index) {
  steps.forEach((s, i) => s.classList.toggle('active', i === index));
  currentStep = index;

  if (steps[index].dataset.step == "5") {
    const summary = document.getElementById('summary');
    const service = form.querySelector('select[name="service"]').value;
    const severity = form.querySelector('select[name="severity"]').value;
    const difficulty = form.querySelector('select[name="location_difficulty"]').value;
    const details = form.querySelector('textarea[name="details"]').value;

    // Base pricing ranges by service
    let base;
    switch(service){
      case "Leak Repair": base=[150,850]; break;
      case "Toilet Service": base=[100,500]; break;
      case "Clog Removal": base=[150,600]; break;
      case "Water Heater": base=[150,900]; break;
      case "Faucet & Fixture": base=[100,400]; break;
      case "Shower & Bath": base=[150,900]; break;
      default: base=[100,500];
    }

    // Adjust by severity
    let multiplier=1;
    if(severity=="Minor") multiplier=1;
    else if(severity=="Moderate") multiplier=1.25;
    else if(severity=="Major") multiplier=1.5;

    // Adjust by location difficulty
    if(difficulty=="Easy") multiplier *=1;
    else if(difficulty=="Medium") multiplier *=1.2;
    else if(difficulty=="Hard") multiplier *=1.4;

    let min=Math.round(base[0]*multiplier);
    let max=Math.round(base[1]*multiplier);

    summary.innerHTML=`<p><strong>Service:</strong> ${service}</p>
                       <p><strong>Severity:</strong> ${severity}</p>
                       <p><strong>Location Difficulty:</strong> ${difficulty}</p>
                       <p><strong>Additional Details:</strong> ${details}</p>
                       <p><strong>Estimated Cost Range:</strong> $${min} - $${max}</p>`;
  }
}

// Next / Prev buttons
form.querySelectorAll('.next').forEach(btn => btn.addEventListener('click', ()=>{
  const inputs = steps[currentStep].querySelectorAll('input, select, textarea');
  let valid=true;
  inputs.forEach(input=>{ if(!input.checkValidity()) valid=false; });
  if(valid) showStep(currentStep+1);
  else inputs[0].reportValidity();
}));

form.querySelectorAll('.prev').forEach(btn => btn.addEventListener('click', ()=>showStep(currentStep-1)));
</script>

</body>
</html>
